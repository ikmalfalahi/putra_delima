<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Admin | Putra Delima</title>

  <!-- === Stylesheets === -->
  <link rel="stylesheet" href="assets/css/navbar.css">
  <link rel="stylesheet" href="assets/css/admin.css">

  <!-- === Supabase SDK === -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="assets/js/supabase.js"></script>
</head>
<body>

  <!-- === Navbar Global Placeholder === -->
  <div id="navbar-placeholder"></div>

  <!-- === Dashboard Header === -->
  <main class="container">
    <h2>Selamat Datang di Dashboard Admin</h2>
    <p>Kelola anggota dan keuangan dengan mudah.</p>
  </main>

  <!-- === Statistik Dashboard === -->
  <section class="dashboard">
    <div class="dash-card total">
      <h3>👥 Total Anggota</h3>
      <p id="total-anggota">0</p>
    </div>
    <div class="dash-card lunas">
      <h3>✅ Lunas</h3>
      <p id="total-lunas">0</p>
    </div>
    <div class="dash-card belum">
      <h3>❌ Belum Lunas</h3>
      <p id="total-belum">0</p>
    </div>
    <div class="dash-card dana">
      <h3>💰 Total Iuran</h3>
      <p id="total-dana">Rp 0</p>
    </div>
  </section>

  <!-- === Tabel Data Iuran === -->
  <section class="admin-container">
    <div class="admin-actions">
      <button id="add-data">➕ Tambah Data Iuran</button>
      <button id="refresh-data">🔄 Refresh</button>
    </div>

    <table class="admin-table">
      <thead>
        <tr>
          <th>No</th>
          <th>Nama</th>
          <th>Bulan</th>
          <th>Bukti</th>
          <th>Status</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody id="admin-table-body">
        <tr><td colspan="6">Memuat data...</td></tr>
      </tbody>
    </table>
  </section>

  <!-- === Popup Form Tambah/Edit Data === -->
  <div class="popup hidden" id="popup-form">
    <div class="popup-content">
      <h2 id="popup-title">Tambah Data Iuran</h2>
      <input type="text" id="nama" placeholder="Nama Anggota">
      
      <select id="bulan">
        <option value="">Pilih Bulan</option>
        <option>Januari</option>
        <option>Februari</option>
        <option>Maret</option>
        <option>April</option>
        <option>Mei</option>
        <option>Juni</option>
        <option>Juli</option>
        <option>Agustus</option>
        <option>September</option>
        <option>Oktober</option>
        <option>November</option>
        <option>Desember</option>
      </select>

      <input type="file" id="bukti" accept="image/*">

      <select id="status">
        <option>Lunas</option>
        <option>Belum Lunas</option>
      </select>

      <div class="popup-btns">
        <button id="save-data">💾 Simpan</button>
        <button id="cancel">Batal</button>
      </div>
    </div>
  </div>

  <!-- === Footer === -->
  <footer class="footer">
    <p>© 2025 Putra Delima | Sistem Manajemen Iuran & Keuangan</p>
  </footer>

  <!-- === Script: Navbar Loader === -->
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const placeholder = document.getElementById("navbar-placeholder");
        const res = await fetch("navbar.html");
        placeholder.innerHTML = await res.text();
      } catch (err) {
        console.error("❌ Gagal memuat navbar:", err);
      }
    });
  </script>

  <!-- === Script Files === -->
  <script src="assets/js/navbar.js"></script>
  <script src="assets/js/admin.js"></script>

</body>
</html>
